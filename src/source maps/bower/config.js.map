{"version":3,"sources":["bower/config.js"],"names":[],"mappings":"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","file":"bower/config.js","sourcesContent":["'use strict';\n\nvar tty = require('tty');\nvar object = require('mout').object;\n\nvar lang = require('mout/lang');\nvar object = require('mout/object');\nvar rc = require('bower-config/lib/util/rc');\nvar defaults = require('./utils/defaults');\nvar expand = require('bower-config/lib/util/expand');\nvar path = require('path');\nvar Configstore = require('configstore');\n\nvar cachedConfigs = {};\n\nclass Config {\n  constructor(cwd) {\n    this._cwd = cwd || process.cwd();\n    this._config = {};\n    this.DEFAULT_REGISTRY = defaults.registry;\n  }\n  load() {\n    this._config = rc('bower', defaults, this._cwd);\n    return this;\n  }\n  get() {\n    // TODO\n  }\n  set() {\n    // TODO\n    return this;\n  }\n  del() {\n    // TODO\n    return this;\n  }\n  save() {\n    // TODO\n    return this;\n  }\n\n  toObject() {\n    var config = lang.deepClone(this._config);\n\n    config = this.normalise(config);\n    return config;\n  }\n  create(cwd) {\n    return new Config(cwd);\n  }\n  read(cwd) {\n    var config = new Config(cwd);\n    return config.load().toObject();\n  }\n\n  normalise(rawConfig) {\n    var config = {};\n\n    // Mix in defaults and raw config\n    object.deepMixIn(config, expand(defaults), expand(rawConfig));\n\n    // Some backwards compatible things..\n    config.shorthandResolver = config.shorthandResolver\n      .replace(/\\{\\{\\{/g, '{{')\n      .replace(/\\}\\}\\}/g, '}}');\n\n    // Ensure that every registry endpoint does not end with /\n    config.registry.search = config.registry.search.map(function (url) {\n      return url.replace(/\\/+$/, '');\n    });\n    config.registry.register = config.registry.register.replace(/\\/+$/, '');\n    config.registry.publish = config.registry.publish.replace(/\\/+$/, '');\n    config.tmp = path.resolve(config.tmp);\n\n    return config;\n  }\n}\n\nfunction readCachedConfig(cwd) {\n  if (cachedConfigs[cwd]) {\n    return cachedConfigs[cwd];\n  }\n\n  var config = cachedConfigs[cwd] = new Config().read(cwd);\n  var configstore = new Configstore('bower-github').all;\n\n  object.mixIn(config, configstore);\n\n  // Delete the json attribute because it is no longer supported\n  // and conflicts with --json\n  delete config.json;\n\n  // If interactive is auto (null), guess its value\n  if (config.interactive == null) {\n    config.interactive = (\n      process.bin === 'bower' &&\n      tty.isatty(1) &&\n      !process.env.CI\n    );\n  }\n\n  return config;\n}\n\nfunction resetCache() {\n  cachedConfigs = {};\n}\n\nfunction defaultConfig(config) {\n  config = config || {};\n\n  var cachedConfig = readCachedConfig(config.cwd || process.cwd());\n\n  return object.merge(cachedConfig, config);\n}\n\nmodule.exports = defaultConfig;\nmodule.exports.reset = resetCache;"],"sourceRoot":"/source/"}